# Systlib

Systlib firstly a backup of the code I used to analyze data from the 124Sn(alpha,p gamma)127Sb experiment run at OLC in November 2020, and secondly a reference for future experiments.
This set of scripts are meant as a way to evaluate the uncertainties connected to the lack of both D0 and <Gg> values, both needed to normalize the gamma strength function and the nuclear level density. When working with exotic, neutron-rich unstable nuclei it is more the rule than the exception that these values are not present in the literature, so much of the code could potentially be reused for other similar experiments.
In brief, this set of scripts expands on the oslo-method-software package, and:
1) guesses values of rho(Sn) (D0) and <Gg> from systematics from neighbouring nuclei
2) runs counting.c and normalization.c many times in order to generate many different nlds and gsfs using different parameters as input (here we loop though different L1, L2, rho(Sn) and <Gg>)
3) for each nld and gsf, evaluate their fit to:
	- known levels in a region in the low excitation energy,
	- chosen value(s) of rho(Sn) with uncertainty guessed in 1),
	- chosen value(s) of <Gg> with uncertainty guessed in 1),
by calculating a chi2 score
4) generate input for talys to calculate the neutron capture rate and MACS
5) evaluate the uncertainties for the nld, gsf, ncrate and MACS by finding graphically where the chi2_min + 1 intercepts the parabola in the nld (or gsf or MACS) vs chi2 plot.
6) plotting everyting

---------------------------------

Generally speaking, this is what I did:

1) Run syst-rho-Gg-py. In this code are hardcoded different nuclear properties for the neighbouring nuclei, generally gotten from robin and d2rho from the oslo-method-software and copied from Mughabghab and RIPL when available. Playing a bit with this code, I could get a recommended value and an uncertainty range for the rho(Sn) value and the <Gg>.
2) Run run_cnt_nrm.py. This script creates a database by looping counting.c and normalization.c several times for different parameters. L1 and L2 are chosen to cover all possible interval choices for the low energy region, and rho(Sn) and <Gg> to cover the uncertainty span evaluated in the step above.
3) create_talys_inputs.py creates a set of inputs for talys by creating a Sb.tab (the way talys 1.95 reads the level density), an input file and E1strength and M1 strength files in the same folder structure as the dataset. The E1 and M1 strength are extrapolated for higher energies by joining the gsf to the experimental one from 128Te. This is then provided to Saga, which will run through them. I then join the output with the dataset of the nlds and gsfs, so that each folder now includes the evaluated neutron capture rates and MACS.
4) run make_nld_gsfs_list.py. Here we evaluate the chi2 score of each generated nld, gsf and astrorate, and collect all properties of each evaluated nld, gsf and astrorate in objects, which are successively collected in numpy arrays, saved to file. Here we also evaluate graphically the standard deviation for each energy or temperature bin by checking where the chi2_min line crosses the parabola in the value vs chi2 graph. The standard deviation values are then written to txt files, easily readable for other codes.
5) plot_nld_gsf_errs.py takes the txt files and plots them together with models from talys.
6) plot_126Sb_MACS.py plots the MACS together with the values from different libraries and TALYS

together with this, we have

7) Tin-gsf-fit.py. This script tries to guess the values of the parameters of the GLO modelling the GDR for 126Sn, by fitting for different known lighter isotopes and extrapolating for 126Sn.
8) RootFit/fitRoot_gSF_128Te_oneGauss.cpp uses root to fit a GLO to the Lepretre 128Te data, and extract the parameters (strength128Te.nrm is used as input and is generated by make_strength128Te-nrm.py)
9) Sb127_gsf-fit.py calculates the average of the GLO parameters of 126Sn and 128Te, and writes to file.
10) These values are then used by RootFit/fitRoot_gSF_127Sb_oneGauss.cpp and RootFit/fitRoot_gSF_127Sb_3Gauss.cpp to fit either one gaussian or three gaussian to the structures around 7 and 8 MeV.
11) These values are then copied manually to Plot-1GaussOg3gaussians_beside.py, and plotted

systlib and readlib are libraries of functions used by more or less all scripts in the repository












